<!DOCTYPE html>
<html>

<link rel="stylesheet" href="firstpage.css">
<script src="firstpage.js" ></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<head>
    <title>E-library ITB</title>
</head>

<body>

    <h1 class="header">
        <img src="logo-itb-512px.png" width="60" height="60" alt="logo itb"></img>
        <p class="judul"> UPT Perpustakaan ITB </p>
    </h1>

    <div class="tab" style="display: inline-flexbox;">
        <button class="tablinks" onclick="openTable(event, 'Search')">Search</button>
        <button class="tablinks" onclick="openTable(event, 'Contact')">Contact</button>
        <button class="tablinks" onclick="openTable(event, 'About')">About</button>
        <button href="#notification" class="notification" style="background-color: dodgerblue;">Notification</button>
    </div>

    <!-- <form action="" target="_self" method="get"> -->
    <p padding: 10px></p>
    <div id="Search" class="tabcontent">
        <fieldset id="corners">
            <legend>Search</legend>
            <div class="topnav">
                <span style="display: inline-flexbox">
                    <input type="text" placeholder="Mencari Buku/Jurnal..." name="keyword" style="width: 30%; float: left">
                    <button onclick="showtabel()" style="width: 50px; height: 30px;">submit</button>
                </span>
            </div><br>
            <p padding: 10px></p>
            <label>Katogori</label>
            <select id="bukuJurnal">
                <option value="Book">Book</option>
                <option value="Jurnal">Jurnal</option>
            </select>
            <p padding: 10px></p>
            <label>Sort By</label>
            <select id="sort">
                <option value="Judul">Judul</option>
                <option value="Pengarang">Pengarang</option>
            </select>
            <p padding: 10px></p>
        </fieldset>
        <!-- </form> -->
        
        <!-- tabel hasil pencarian -->
        <table class="tabBuku" id="tabelBuku" style="display: none">
            <thead id="tabheadbuku">
                <tr>
                    <th>ISBN</th>
                    <th>Judul"</th>
                    <th>Pengarang"</th>
                    <th>Penerbit</th>
                    <th>Tahun Terbit</th>
                    <th>Kategori</th>
                <tr>
                <tbody id="tabbodybuku">
                </tbody>
            </thead>
            <thead id="tabheadjurnal">
                <tr>
                    <th>ID Jurnal</th>
                    <th>Judul</th>
                    <th>Pengarang</th>
                    <th>Status E-Journal</th>
                    <th>Tahun Terbit</th>
                    <th>Kategori</th>
                <tr>
                <tbody id="tabbodyjurnal">
                </tbody>
            </thead>
        </table>

        <!-- Detail Modal -->
        <div id="detailModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
            <span class="close">&times;</span>
            <p>Detail Buku</p>
            </div>
        </div>
        <!-- Peminjaman Modal -->
        <div id="borrowModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
            <span class="close">&times;</span>
            <p>Form pemesanan</p>
            </div>
        </div>
    </div>

    <!-- JQUERY AJAX -->
    <script>
        $.ajax({
            url: 'http://localhost:3000/'+$('#bukuJurnal').val,
            type:'get',
            dataType: 'json',
            success: function(response) {
                var content = '';
                if ($('#bukuJurnal').val == 'Book') {
                    $.each(response, function(key, value){
                    content+=
                        "<tr>" +
                            "<td>"+value.ISBN+"</th>\n" +
                            "<td>"+value.Judul_Buku+"</th>\n" +
                            "<td>"+value.Pengarang+"</th>\n" +
                            "<td>"+value.Penerbit+"</th>\n" +
                            "<td>"+value.Tahun_Terbit+"</th>\n" +
                            "<td>"+value.Kategori+"</th>\n" +
                        "</tr>";
                    )};
                    $("#tabbodybuku").html(content);
                } else {
                    $.each(response, function(key, value){
                    content+=
                        "<tr>" +
                            "<td>"+value.IDJurnal+"</th>\n" +
                            "<td>"+value.Judul_Jurnal+"</th>\n" +
                            "<td>"+value.Pengarang_Jurnal+"</th>\n" +
                            "<td>"+value.Tahun_Terbit_Jurnal+"</th>\n" +
                            "<td>"+value.Kategori_Jurnal+"</th>\n" +
                        "<tr>";
                    )};
                    $("#tabbodyjurnal").html(content);
                };
            },
            error: function(response) {
                console.error(response);
            }
        })
    </script>

</body>

</html>